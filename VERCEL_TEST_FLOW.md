# Vercel 로컬 테스트 흐름도

## 🔄 전체 프로세스

```
┌─────────────────────────────────────────────────────────────────┐
│                    1. 사전 준비                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌──────────────────┐    ┌──────────────────┐                   │
│  │  Vercel CLI 설치  │───▶│  로그인 완료      │                   │
│  │  npm i -g vercel │    │  vercel login    │                   │
│  └──────────────────┘    └──────────────────┘                   │
│           │                                                       │
│           ▼                                                       │
│  ┌──────────────────┐    ┌──────────────────┐                   │
│  │  환경 변수 설정   │───▶│  MongoDB 준비     │                   │
│  │  .env.local      │    │  포트 27017      │                   │
│  └──────────────────┘    └──────────────────┘                   │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                    2. 로컬 테스트 시작                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│         ┌───────────────────────────────────┐                    │
│         │    어떤 방법으로 시작하시겠습니까?   │                    │
│         └───────────────┬───────────────────┘                    │
│                         │                                         │
│         ┌───────────────┼───────────────┐                        │
│         │               │               │                         │
│         ▼               ▼               ▼                         │
│  ┌──────────┐   ┌─────────────┐  ┌──────────┐                   │
│  │ 스크립트  │   │ NPM 명령어  │  │ 직접실행  │                   │
│  └──────────┘   └─────────────┘  └──────────┘                   │
│       │                │               │                          │
│       ▼                ▼               ▼                          │
│  start-vercel-   npm run        vercel dev                       │
│    dev.ps1       test:local                                      │
│       │                │               │                          │
│       └────────────────┴───────────────┘                          │
│                         │                                         │
│                         ▼                                         │
│              ┌──────────────────┐                                │
│              │  자동 체크 시작   │                                │
│              └──────────────────┘                                │
│                         │                                         │
│        ┌────────────────┼────────────────┐                       │
│        ▼                ▼                ▼                        │
│  ┌─────────┐     ┌──────────┐    ┌──────────┐                   │
│  │ MongoDB │     │  .env    │    │  Node    │                   │
│  │  체크    │────▶│  파일    │───▶│ modules  │                   │
│  └─────────┘     └──────────┘    └──────────┘                   │
│       │                                │                          │
│       │                                │                          │
│    [OK] ✓                          [OK] ✓                        │
│       │                                │                          │
│       └────────────────┬───────────────┘                          │
│                        ▼                                          │
│              ┌──────────────────┐                                │
│              │  Vercel Dev 실행  │                                │
│              │  포트: 3000      │                                │
│              └──────────────────┘                                │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                    3. 서버 실행 중                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│              ┌──────────────────────┐                            │
│              │   Vercel Dev Server  │                            │
│              │   localhost:3000     │                            │
│              └──────────┬───────────┘                            │
│                         │                                         │
│          ┌──────────────┼──────────────┐                         │
│          ▼              ▼              ▼                          │
│    ┌─────────┐    ┌─────────┐   ┌─────────┐                     │
│    │   API   │    │  Static │   │  React  │                     │
│    │  /api/* │    │ /static │   │   App   │                     │
│    └─────────┘    └─────────┘   └─────────┘                     │
│         │              │              │                           │
│         ▼              ▼              ▼                           │
│    ┌─────────────────────────────────────┐                      │
│    │      Serverless Functions           │                      │
│    ├─────────────────────────────────────┤                      │
│    │  • admin.js    • employees.js       │                      │
│    │  • attendance.js • holiday.js       │                      │
│    │  • payroll.js  • communication.js   │                      │
│    │  • safety.js   • system.js          │                      │
│    └─────────────────────────────────────┘                      │
│                         │                                         │
│                         ▼                                         │
│              ┌──────────────────┐                                │
│              │     MongoDB      │                                │
│              │  localhost:27017 │                                │
│              └──────────────────┘                                │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                    4. 테스트 실행                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌──────────────────────────────────────────────────┐            │
│  │          브라우저에서 수동 테스트                 │            │
│  ├──────────────────────────────────────────────────┤            │
│  │  1. http://localhost:3000 접속                   │            │
│  │  2. 로그인 (admin / admin123)                    │            │
│  │  3. 각 메뉴 클릭 및 기능 확인                    │            │
│  │  4. 개발자 도구로 Network 탭 확인                │            │
│  └──────────────────────────────────────────────────┘            │
│                         │                                         │
│                         │ 또는                                    │
│                         ▼                                         │
│  ┌──────────────────────────────────────────────────┐            │
│  │          자동 API 테스트 스크립트                 │            │
│  ├──────────────────────────────────────────────────┤            │
│  │  .\test-api-endpoints.ps1                        │            │
│  └──────────────────────────────────────────────────┘            │
│                         │                                         │
│          ┌──────────────┼──────────────┐                         │
│          ▼              ▼              ▼                          │
│    ┌─────────┐    ┌─────────┐   ┌─────────┐                     │
│    │  인증    │───▶│  API    │───▶│  결과   │                     │
│    │  테스트  │    │ 호출    │   │  저장   │                     │
│    └─────────┘    └─────────┘   └─────────┘                     │
│         │              │              │                           │
│         ▼              ▼              ▼                           │
│      Login         Employees     test-results-                   │
│       API         Attendance       *.json                        │
│                    Holiday                                        │
│                    Payroll                                        │
│                                                                   │
│              ┌──────────────────┐                                │
│              │  테스트 리포트    │                                │
│              ├──────────────────┤                                │
│              │  Total: 10       │                                │
│              │  Passed: 10 ✓    │                                │
│              │  Failed: 0       │                                │
│              └──────────────────┘                                │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                    5. 문제 발생 시                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│     Port already in use?                                         │
│     ├─ netstat -ano | findstr :3000                             │
│     └─ taskkill /PID <PID> /F                                    │
│                                                                   │
│     MongoDB 연결 실패?                                            │
│     ├─ npm run start:mongodb                                     │
│     └─ node check-db.js                                          │
│                                                                   │
│     환경 변수 문제?                                               │
│     ├─ vercel env pull                                           │
│     └─ 파일 확인: .env.local                                     │
│                                                                   │
│     API 404 에러?                                                │
│     ├─ vercel.json 라우팅 확인                                   │
│     └─ api/ 폴더 구조 확인                                       │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                    6. 다음 단계                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ✓ 로컬 테스트 완료                                              │
│       │                                                           │
│       ▼                                                           │
│  ┌──────────────────┐                                            │
│  │  프리뷰 배포      │                                            │
│  │  vercel          │                                            │
│  └────────┬─────────┘                                            │
│           │                                                       │
│           ▼                                                       │
│  ┌──────────────────┐                                            │
│  │  배포 URL 테스트  │                                            │
│  └────────┬─────────┘                                            │
│           │                                                       │
│           ▼                                                       │
│  ┌──────────────────┐                                            │
│  │ 프로덕션 배포     │                                            │
│  │ vercel --prod    │                                            │
│  └──────────────────┘                                            │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
```

## 📊 포트 구성

```
┌─────────────────────────────────────────┐
│          로컬 개발 환경                  │
├─────────────────────────────────────────┤
│                                          │
│  MongoDB                                 │
│  └─ localhost:27017                     │
│                                          │
│  Vercel Dev Server                      │
│  ├─ Frontend: localhost:3000            │
│  ├─ API: localhost:3000/api/*           │
│  └─ Static: localhost:3000/static/*     │
│                                          │
└─────────────────────────────────────────┘
```

## 🔄 요청 흐름

```
브라우저
   │
   │ http://localhost:3000
   ▼
Vercel Dev Server
   │
   ├─ /              ──▶ React App (index.html)
   │
   ├─ /api/login     ──▶ api/admin.js
   │                      │
   │                      ▼
   │                  MongoDB Query
   │                      │
   │                      ▼
   │                  JWT Token
   │
   ├─ /api/employees ──▶ api/employees.js
   │                      │
   │                      ▼
   │                  MongoDB Query
   │                      │
   │                      ▼
   │                  JSON Response
   │
   └─ /static/*      ──▶ Build Assets
```

## 🧪 테스트 시나리오 매트릭스

```
┌────────────┬───────────┬───────────┬───────────┐
│   기능     │  수동테스트 │ API테스트 │  E2E테스트 │
├────────────┼───────────┼───────────┼───────────┤
│ 로그인     │     ✓     │     ✓     │     ✓     │
│ 직원관리   │     ✓     │     ✓     │     ✓     │
│ 근태관리   │     ✓     │     ✓     │     ✓     │
│ 휴가관리   │     ✓     │     ✓     │     ✓     │
│ 급여조회   │     ✓     │     ✓     │     ✓     │
│ 공지사항   │     ✓     │     ✓     │     ✓     │
│ 파일업로드 │     ✓     │     -     │     ✓     │
└────────────┴───────────┴───────────┴───────────┘
```

## 📈 성능 메트릭

```
┌─────────────────────────────────────────┐
│          목표 성능 지표                  │
├─────────────────────────────────────────┤
│                                          │
│  페이지 로딩 시간     < 2초              │
│  API 응답 시간        < 500ms            │
│  First Contentful     < 1.5초            │
│  Time to Interactive  < 3초              │
│                                          │
└─────────────────────────────────────────┘
```

---

**참고:** 이 문서는 시각적 흐름을 보여주기 위한 것입니다.  
상세한 내용은 [VERCEL_LOCAL_TEST.md](VERCEL_LOCAL_TEST.md)를 참조하세요.
