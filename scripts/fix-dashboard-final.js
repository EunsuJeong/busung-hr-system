const fs = require('fs');
const path = require('path');

const src = path.join(__dirname, '../src/utils/@@old/251105_utils_reorganize/dashboardUtils.js');
const dst = path.join(__dirname, '../src/utils/utils_admin_dashboard.js');

console.log('ğŸ”§ utils_admin_dashboard.js ìµœì¢… ìˆ˜ì • ì‹œì‘...\n');

let content = fs.readFileSync(src, 'utf-8');

// Exact byte pattern replacements
const replacements = [
  // Header (line 2)
  [" * \u0000ï¿½ï¿½ï¿½ \u0000(  ï¿½ï¿½ï¿½ h\u0018ï¿½", " * [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ ìœ í‹¸ë¦¬í‹°\n * - ì¶œê·¼ ìƒíƒœë³„ ì§ì› ì¡°íšŒ\n * - ì¶œê·¼ ì§ì› ëª©ë¡ ì •ë ¬\n * - í†µê³„ ê³„ì‚° í•¨ìˆ˜ë“¤"],

  // Section headers
  ["// [2_\u0000ï¿½ï¿½ ï¿½ï¿½] 2.1_\u0000ï¿½ï¿½ï¿½ - ï¿½ï¿½ ï¿½ï¿½ï¿½ ï¿½ï¿½ ï¿½] pï¿½", "// [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ - ì¶œê·¼ ìƒíƒœë³„ ì§ì› ì¡°íšŒ"],
  ["// [2_\u0000ï¿½ï¿½ ï¿½ï¿½] 2.1_\u0000ï¿½ï¿½ï¿½ - ï¿½ï¿½ï¿½\u0014 ï¿½ï¿½\u0014 ï¿½ï¿½ ï¿½] hï¿½", "// [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ - ì •ë ¬ëœ ì¶œê·¼ ì§ì› ëª©ë¡ ë°˜í™˜"],
  ["// [2_\u0000ï¿½ï¿½ ï¿½ï¿½] 2.1_\u0000ï¿½ï¿½ï¿½ - ï¿½ï¿½\u0014 ï¿½ï¿½ï¿½\u0014 ï¿½ï¿½", "// [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ - ì›”ë³„ ì¶œê·¼ìœ¨ ê³„ì‚°"],
  ["// [2_\u0000ï¿½ï¿½ ï¿½ï¿½] 2.1_\u0000ï¿½ï¿½ï¿½ - ï¿½ï¿½\u0014 ï¿½\u0001ï¿½ï¿½\u0014 ï¿½ï¿½", "// [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ - ì›”ë³„ ì§€ê°ìœ¨ ê³„ì‚°"],
  ["// [2_\u0000ï¿½ï¿½ ï¿½ï¿½] 2.1_\u0000ï¿½ï¿½ï¿½ - ï¿½ï¿½\u0014 ï¿½ï¿½ï¿½ï¿½\u0014 ï¿½ï¿½", "// [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ - ì›”ë³„ ê²°ê·¼ìœ¨ ê³„ì‚°"],
  ["// [2_\u0000ï¿½ï¿½ ï¿½ï¿½] 2.1_\u0000ï¿½ï¿½ï¿½ - ï¿½ï¿½\u0014 ï¿½\u0004ï¿½ï¿½ï¿½\u0014 ï¿½ï¿½", "// [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ - ì›”ë³„ ì´ì§ë¥  ê³„ì‚°"],
  ["// [2_\u0000ï¿½ï¿½ ï¿½ï¿½] 2.1_\u0000ï¿½ï¿½ï¿½ - ï¿½\u0011ï¿½\u0014 ï¿½4ï¿½ï¿½ï¿½ï¿½\u0014ï¿½ï¿½", "// [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ - í‰ê·  ì´ˆê³¼ê·¼ë¬´ì‹œê°„ ê³„ì‚°"],
  ["// [2_\u0000ï¿½ï¿½ ï¿½ï¿½] 2.1_\u0000ï¿½ï¿½ï¿½ - ï¿½ï¿½\u0014 4ï¿½ï¿½ï¿½\u0014ï¿½ï¿½\u0014 ï¿½ï¿½", "// [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ - ì—°ì°¨ ì‚¬ìš©ë¥  ê³„ì‚°"],
  ["// [2_\u0000ï¿½ï¿½ ï¿½ï¿½] 2.1_\u0000ï¿½ï¿½ï¿½ - ï¿½\u0014 52ï¿½ï¿½ï¿½\u0014 \u0004ï¿½Hï¿½ï¿½\u0014 ï¿½ï¿½", "// [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ - ì£¼ 52ì‹œê°„ ìœ„ë°˜ìœ¨ ê³„ì‚°"],
  ["// [2_\u0000ï¿½ï¿½ ï¿½ï¿½] 2.1_\u0000ï¿½ï¿½ï¿½ - ï¿½\u00114ï¿½t\u0014 ï¿½ï¿½ï¿½\u0014 ï¿½ï¿½", "// [2_ê´€ë¦¬ì ëª¨ë“œ] 2.1_ëŒ€ì‹œë³´ë“œ - ìŠ¤íŠ¸ë ˆìŠ¤ ì§€ìˆ˜ ê³„ì‚°"],

  // JSDoc comments
  [" * ï¿½ï¿½ ï¿½ï¿½ï¿½ ï¿½ï¿½ ï¿½]D pï¿½iï¿½ï¿½", " * ì¶œê·¼ ìƒíƒœë³„ ì§ì› ëª©ë¡ ì¡°íšŒ"],
  [" * ï¿½ï¿½\u0014 ï¿½ï¿½\u0014 ï¿½]D ï¿½ï¿½ï¿½\u0014ï¿½ï¿½\u0014 hï¿½", " * ì¶œê·¼ ì§ì› ëª©ë¡ì„ ì •ë ¬í•˜ì—¬ ë°˜í™˜"],
  [" * ï¿½ï¿½\u0014 ï¿½ï¿½ï¿½\u0014 ï¿½ï¿½", " * ì›”ë³„ ì¶œê·¼ìœ¨ ê³„ì‚°"],
  [" * ï¿½ï¿½\u0014 ï¿½\u0001ï¿½ï¿½\u0014 ï¿½ï¿½", " * ì›”ë³„ ì§€ê°ìœ¨ ê³„ì‚°"],
  [" * ï¿½ï¿½\u0014 ï¿½ï¿½ï¿½ï¿½\u0014 ï¿½ï¿½", " * ì›”ë³„ ê²°ê·¼ìœ¨ ê³„ì‚°"],
  [" * ï¿½ï¿½\u0014 ï¿½\u0004ï¿½ï¿½ï¿½\u0014 ï¿½ï¿½", " * ì›”ë³„ ì´ì§ë¥  ê³„ì‚°"],
  [" * ï¿½\u0011ï¿½\u0014 ï¿½4ï¿½ï¿½ï¿½ï¿½\u0014ï¿½ï¿½\u0014 ï¿½ï¿½", " * í‰ê·  ì´ˆê³¼ê·¼ë¬´ì‹œê°„ ê³„ì‚°"],
  [" * ï¿½ï¿½\u0014 4ï¿½ï¿½ï¿½\u0014ï¿½ï¿½\u0014 ï¿½ï¿½", " * ì—°ì°¨ ì‚¬ìš©ë¥  ê³„ì‚°"],
  [" * ï¿½\u0014 52ï¿½ï¿½ï¿½\u0014 \u0004ï¿½Hï¿½ï¿½\u0014 ï¿½ï¿½", " * ì£¼ 52ì‹œê°„ ìœ„ë°˜ìœ¨ ê³„ì‚°"],
  [" * ï¿½\u00114ï¿½t\u0014 ï¿½ï¿½ï¿½\u0014 ï¿½ï¿½", " * ìŠ¤íŠ¸ë ˆìŠ¤ ì§€ìˆ˜ ê³„ì‚°"],

  // Param descriptions
  [" * @param {Object} params - ï¿½\u001cï¿½\u0018 \u001dï¿½", " * @param {Object} params - ë§¤ê°œë³€ìˆ˜"],
  [" * @param {Array} params.employees - ï¿½ï¿½ ï¿½]", " * @param {Array} params.employees - ì§ì› ëª©ë¡"],
  [" * @param {string} params.status - pï¿½` ï¿½ï¿½", " * @param {string} params.status - ì¡°íšŒí•  ìƒíƒœ"],
  [" * @param {boolean} params.isNightShift - |\u0004 ï¿½4 ï¿½", " * @param {boolean} params.isNightShift - ì•¼ê°„ ê·¼ë¬´ ì—¬ë¶€"],
  [" * @param {string} params.dashboardDateFilter - ï¿½ï¿½ D0", " * @param {string} params.dashboardDateFilter - ë‚ ì§œ í•„í„°"],
  [" * @param {string} params.dashboardSelectedDate -  ï¿½\u001c ï¿½ï¿½", " * @param {string} params.dashboardSelectedDate - ì„ íƒëœ ë‚ ì§œ"],
  [" * @param {Function} params.getAttendanceForEmployee - ï¿½ï¿½ pt0 pï¿½ h\u0018", " * @param {Function} params.getAttendanceForEmployee - ì¶œê·¼ ë°ì´í„° ì¡°íšŒ í•¨ìˆ˜"],
  [" * @param {Function} params.analyzeAttendanceStatusForDashboard - ï¿½ï¿½ ï¿½ï¿½ ï¿½\u001d h\u0018", " * @param {Function} params.analyzeAttendanceStatusForDashboard - ì¶œê·¼ ìƒíƒœ ë¶„ì„ í•¨ìˆ˜"],
  [" * @param {Function} params.devLog - \u001c\u001c \\ï¿½ h\u0018", " * @param {Function} params.devLog - ê°œë°œ ë¡œê·¸ í•¨ìˆ˜"],
  [" * @returns {Array} D0ï¿½\u001c ï¿½ï¿½ ï¿½]", " * @returns {Array} í•„í„°ë§ëœ ì§ì› ëª©ë¡"],
];

console.log('ğŸ“ íŒ¨í„´ êµì²´ ì¤‘...');
let count = 0;

replacements.forEach(([pattern, replacement]) => {
  if (content.includes(pattern)) {
    content = content.split(pattern).join(replacement);
    count++;
    console.log(`  âœ“ íŒ¨í„´ ${count} êµì²´`);
  }
});

console.log(`\nâœ… ${count}ê°œ íŒ¨í„´ êµì²´ ì™„ë£Œ\n`);

// String literal fixes (need global replace)
const stringFixes = [
  [/'\u0018ï¿½'/g, "'ì•¼ê°„'"],
  [/'ï¿½'/g, "'ì£¼ê°„'"],
  [/'4ï¿½'/g, "'í‡´ì‚¬'"],
  [/'ï¿½ï¿½'/g, "'ì¶œê·¼'"],
  [/'ï¿½\u0001'/g, "'ì§€ê°'"],
  [/'ï¿½\('/g, "'ì¡°í‡´'"],
  [/'ï¿½ï¿½'/g, "'ê²°ê·¼'"],
  [/'ï¿½ï¿½'/g, "'ë¯¸ì¶œê·¼'"],
  [/'ï¿½4\u0011'/g, "'ê·¼ë¬´ì¤‘'"],
];

console.log('ğŸ“ ë¬¸ìì—´ ë¦¬í„°ëŸ´ êµì²´ ì¤‘...');

stringFixes.forEach(([pattern, replacement], i) => {
  content = content.replace(pattern, replacement);
  console.log(`  âœ“ ë¬¸ìì—´ ${i + 1} êµì²´`);
});

fs.writeFileSync(dst, content, 'utf-8');

console.log('\nâœ… íŒŒì¼ ì €ì¥ ì™„ë£Œ!');
console.log(`ğŸ“ ê²½ë¡œ: ${dst}`);
